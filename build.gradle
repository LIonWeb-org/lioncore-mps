configurations {
	mpsArtifacts
	libs
}

ext.artifactsDir = new File(rootDir, 'artifacts')

repositories {
	mavenCentral()
	maven { url 'https://artifacts.itemis.cloud/repository/maven-mps/' }
}

dependencies {
	mpsArtifacts "de.itemis.mps:extensions:$mpsExtensionsVersion"

}

task resolveMpsArtifacts(type: Copy) {
	description 'Download and copy mps artifacts'
	from {
		configurations.mpsArtifacts.resolve().collect { zipTree(it) }
	}
	into artifactsDir
}

task resolveLibs(type: Sync) {
    from configurations.libs
    into new File(buildDir, 'libs')

    rename { filename ->
        def ra = configurations.libs.resolvedConfiguration.resolvedArtifacts.find { ResolvedArtifact ra -> ra.file.name == filename }
        String finalName
        if (ra.classifier != null) {
            finalName = "${ra.name}-${ra.classifier}.${ra.extension}"
        } else {
            finalName = "${ra.name}.${ra.extension}"
        }
        return finalName
    }
}


